package com.example.malmungchi
import androidx.compose.runtime.Composable
import androidx.navigation.compose.NavHost
import androidx.navigation.compose.composable
import androidx.navigation.compose.rememberNavController
import androidx.hilt.navigation.compose.hiltViewModel
import com.example.malmungchi.navigation.MainScreen
import com.malmungchi.feature.login.LoginScreen
import com.malmungchi.feature.study.first.StudyIntroScreen
import com.malmungchi.feature.study.first.StudyReadingScreen
import com.malmungchi.feature.study.first.StudyAppendixScreen
import com.malmungchi.feature.study.first.StudyAppendixListScreen
import com.malmungchi.feature.study.StudyReadingViewModel
import com.malmungchi.feature.study.second.StudySecondIntroScreen   // ‚úÖ Ï∂îÍ∞Ä
import com.malmungchi.feature.study.second.StudySecondScreen       // ‚úÖ Ï∂îÍ∞Ä

@Composable
fun MainApp() {
    val navController = rememberNavController()

    NavHost(
        navController = navController,
        startDestination = "study_intro"
    ) {
        // 1Ô∏è‚É£ Intro ‚Üí 3Ï¥à ÌõÑ ReadingScreen
        composable("study_intro") {
            StudyIntroScreen(
                onNavigateNext = {
                    navController.navigate("study_reading") {
                        popUpTo("study_intro") { inclusive = true }
                    }
                }
            )
        }

        // 2Ô∏è‚É£ StudyReadingScreen ‚Üí Appendix
        composable("study_reading") {
            val viewModel = hiltViewModel<StudyReadingViewModel>()
            StudyReadingScreen(
                viewModel = viewModel,
                onNextClick = {
                    navController.navigate("appendix") {
                        popUpTo("study_reading") { inclusive = true }
                    }
                },
                onBackClick = { navController.popBackStack() }
            )
        }

        // 3Ô∏è‚É£ Appendix ‚Üí 3Ï¥à ÌõÑ AppendixList
        composable("appendix") {
            StudyAppendixScreen(
                onNavigateNext = {
                    navController.navigate("appendix_list") {
                        popUpTo("appendix") { inclusive = true }
                    }
                }
            )
        }

        // 4Ô∏è‚É£ AppendixList ‚Üí 2Îã®Í≥Ñ Intro Î°ú Ïù¥ÎèôÌïòÎèÑÎ°ù ÏàòÏ†ï
        composable("appendix_list") {
            val viewModel = hiltViewModel<StudyReadingViewModel>()
            StudyAppendixListScreen(
                token = "dummy_token",
                studyId = 1,
                viewModel = viewModel,
                onBackClick = {
                    navController.navigate("study_reading") {
                        popUpTo("appendix_list") { inclusive = true }
                    }
                },
                onNavigateNext = {
                    navController.navigate("study_second_intro") { // ‚úÖ study_second_introÎ°ú Î≥ÄÍ≤Ω
                        popUpTo("appendix_list") { inclusive = true }
                    }
                }
            )
        }

        // ‚úÖ 5Ô∏è‚É£ 2Îã®Í≥Ñ Intro ‚Üí 2Îã®Í≥Ñ Î≥∏Î¨∏ ÌôîÎ©¥
        composable("study_second_intro") {
            StudySecondIntroScreen(
                onNavigateNext = {
                    navController.navigate("study_second") {
                        popUpTo("study_second_intro") { inclusive = true }
                    }
                }
            )
        }

        // ‚úÖ 6Ô∏è‚É£ 2Îã®Í≥Ñ Î≥∏Î¨∏ ÌôîÎ©¥ (StudySecondScreen Ïó∞Í≤∞)
        composable("study_second") {
            val viewModel = hiltViewModel<StudyReadingViewModel>()
            StudySecondScreen(
                token = "dummy_token", // üîπ Ïã§Ï†ú ÌÜ†ÌÅ∞ÏúºÎ°ú ÍµêÏ≤¥ ÌïÑÏöî
                viewModel = viewModel,
                onBackClick = { navController.popBackStack() },
                onNextClick = {
                    navController.navigate("main") {
                        popUpTo("study_second") { inclusive = true }
                    }
                }
            )
        }

        // 7Ô∏è‚É£ Î©îÏù∏ ÌôîÎ©¥
        composable("main") { MainScreen() }

        // 8Ô∏è‚É£ Î°úÍ∑∏Ïù∏ ÌôîÎ©¥
        composable("login") {
            LoginScreen(
                onLoginSuccess = {
                    navController.navigate("main") {
                        popUpTo("login") { inclusive = true }
                    }
                }
            )
        }
    }
}
//import androidx.compose.runtime.Composable
//import androidx.navigation.compose.NavHost
//import androidx.navigation.compose.composable
//import androidx.navigation.compose.rememberNavController
//import com.example.malmungchi.navigation.MainScreen
//import com.malmungchi.feature.login.LoginScreen
//import com.malmungchi.feature.study.first.StudyIntroScreen
//import com.malmungchi.feature.study.first.StudyReadingScreen
//import androidx.hilt.navigation.compose.hiltViewModel
//import com.malmungchi.feature.study.StudyReadingViewModel
//import com.malmungchi.feature.study.first.StudyAppendixScreen
//import com.malmungchi.feature.study.first.StudyAppendixListScreen
//import com.malmungchi.feature.study.second.StudySecondScreen
//
//@Composable
//fun MainApp() {
//    val navController = rememberNavController()
//
//    NavHost(
//        navController = navController,
//        startDestination = "study_intro"
//    ) {
//        // 1Ô∏è‚É£ Intro ‚Üí 3Ï¥à ÌõÑ ReadingScreen
//        composable("study_intro") {
//            StudyIntroScreen(
//                onNavigateNext = {
//                    navController.navigate("study_reading") {
//                        popUpTo("study_intro") { inclusive = true }
//                    }
//                }
//            )
//        }
//
//        // 2Ô∏è‚É£ StudyReadingScreen ‚Üí Appendix
//        composable("study_reading") {
//            val viewModel = hiltViewModel<StudyReadingViewModel>()
//            StudyReadingScreen(
//                viewModel = viewModel,
//                onNextClick = {
//                    navController.navigate("appendix") {   // ‚úÖ ÏàòÏ†ïÎê®
//                        popUpTo("study_reading") { inclusive = true }
//                    }
//                },
//                onBackClick = { navController.popBackStack() }
//            )
//        }
//
//        // 3Ô∏è‚É£ Appendix ‚Üí 3Ï¥à ÌõÑ AppendixList
//        composable("appendix") {
//            StudyAppendixScreen(
//                onNavigateNext = {
//                    navController.navigate("appendix_list") {   // ‚úÖ ÏàòÏ†ïÎê®
//                        popUpTo("appendix") { inclusive = true }
//                    }
//                }
//            )
//        }
//
//        // MainApp.kt
//        composable("appendix_list") {
//            val viewModel = hiltViewModel<StudyReadingViewModel>()
//            StudyAppendixListScreen(
//                token = "dummy_token",
//                studyId = 1,
//                viewModel = viewModel,
//                onBackClick = {
//                    navController.navigate("study_reading") {   // ‚úÖ Î™ÖÏãúÏ†ÅÏúºÎ°ú Ïù¥Îèô
//                        popUpTo("appendix_list") { inclusive = true }
//                    }
//                },
//                onNavigateNext = {
//                    navController.navigate("main") {
//                        popUpTo("appendix_list") { inclusive = true }
//                    }
//                }
//            )
//        }
//        composable("study_second_intro") {
//            StudySecondIntroScreen(
//                onNavigateNext = {
//                    navController.navigate("study_second") {   // ‚úÖ 2Îã®Í≥Ñ Î≥∏Î¨∏ ÌôîÎ©¥ÏúºÎ°ú Ïù¥Îèô
//                        popUpTo("study_second_intro") { inclusive = true }
//                    }
//                }
//            )
//        }
//
//        // 5Ô∏è‚É£ Î©îÏù∏ ÌôîÎ©¥
//        composable("main") { MainScreen() }
//
//        // 6Ô∏è‚É£ Î°úÍ∑∏Ïù∏ ÌôîÎ©¥
//        composable("login") {
//            LoginScreen(
//                onLoginSuccess = {
//                    navController.navigate("main") {
//                        popUpTo("login") { inclusive = true }
//                    }
//                }
//            )
//        }
//    }
//}

@Composable
fun StudySecondIntroScreen(onNavigateNext: () -> Unit) {

}

//@Composable
//fun MainApp() {
//    val navController = rememberNavController()
//
//    NavHost(
//        navController = navController,
//        startDestination = "study_intro"
//    ) {
//        // 1Ô∏è‚É£ Intro ‚Üí 3Ï¥à ÌõÑ ReadingScreen
//        composable("study_intro") {
//            StudyIntroScreen(
//                onNavigateNext = {
//                    navController.navigate("study_reading") {
//                        popUpTo("study_intro") { inclusive = true }
//                    }
//                }
//            )
//        }
//
//        // 2Ô∏è‚É£ StudyReadingScreen (Î≤ÑÌäº ÌÅ¥Î¶≠ ‚Üí main)
//        composable("study_reading") {
//            val viewModel = hiltViewModel<StudyReadingViewModel>()
//            StudyReadingScreen(
//                viewModel = viewModel,
//                onNextClick = {
//                    navController.navigate("main") {
//                        popUpTo("study_reading") { inclusive = true }
//                    }
//                },
//                onBackClick = {
//                    navController.popBackStack()
//                }
//            )
//        }
//
//        // 3Ô∏è‚É£ Appendix (3Ï¥à ÌõÑ ‚Üí main)
//        composable("appendix") {
//            StudyAppendixScreen(
//                onNavigateNext = {
//                    navController.navigate("main") {   // ‚úÖ appendix ‚Üí main
//                        popUpTo("appendix") { inclusive = true }
//                    }
//                }
//            )
//        }
//
//        // 4Ô∏è‚É£ AppendixList (Îã®Ïñ¥ Î¶¨Ïä§Ìä∏ ‚Üí main)
//        composable("appendix_list") {
//            val viewModel = hiltViewModel<StudyReadingViewModel>()
//            // ‚úÖ APIÎäî ÎÇòÏ§ëÏóê Ïó∞Í≤∞, ÏßÄÍ∏àÏùÄ Î™©ÏóÖÏúºÎ°úÎßå Ìò∏Ï∂ú
//            StudyAppendixListScreen(
//                token = "dummy_token",
//                studyId = 1,  // ÏùºÎã® ÎçîÎØ∏ ID
//                viewModel = viewModel,
//                onBackClick = { navController.popBackStack() },
//                onNavigateNext = {
//                    navController.navigate("main") {
//                        popUpTo("appendix_list") { inclusive = true }
//                    }
//                }
//            )
//        }
//
//        // 5Ô∏è‚É£ Î©îÏù∏ ÌôîÎ©¥
//        composable("main") { MainScreen() }
//
//        // 6Ô∏è‚É£ Î°úÍ∑∏Ïù∏ ÌôîÎ©¥ (ÌòÑÏû¨ ÎØ∏ÏÇ¨Ïö©)
//        composable("login") {
//            LoginScreen(
//                onLoginSuccess = {
//                    navController.navigate("main") {
//                        popUpTo("login") { inclusive = true }
//                    }
//                }
//            )
//        }
//    }
//}

//@Composable
//fun MainApp() {
//    val navController = rememberNavController()
//
//    NavHost(
//        navController = navController,
//        startDestination = "login"   // ‚úÖ Ï≤´ ÌôîÎ©¥ÏùÄ Î°úÍ∑∏Ïù∏
//    ) {
//        composable("login") {
//            LoginScreen(
//                onLoginSuccess = {
//                    navController.navigate("main") {
//                        popUpTo("login") { inclusive = true } // Î°úÍ∑∏Ïù∏ ÌôîÎ©¥ Ï†úÍ±∞
//                    }
//                }
//            )
//        }
//        composable("main") { MainScreen() }  // ‚úÖ Î©îÏù∏ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò ÌôîÎ©¥
//    }
//}